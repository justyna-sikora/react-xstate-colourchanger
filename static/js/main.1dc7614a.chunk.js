(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n(8),s=(n(29),n(7),n(23)),a=n(20),c=n(2),i=n(43),b=n(44);const l=n(12).a.cancel,u={b1:{year:1950,yearString:"19 50",event:"Invention of the garbage bag",question:"Where was the garabage bag invented?",correctAnswer:"1",answers:"1. Canada or 2. France or 3. Belgium",key:"b1",stringAnswer:"Canada"},b2:{year:1873,yearString:"18 73",event:"Invention of blue jeans",question:"What is the name of the company that created blue jeans?",correctAnswer:"2",answers:"1. Wrangler or 2. Levi's or 3. Lee Jeans",key:"b2",stringAnswer:"Levis"},b3:{year:1908,yearString:"19 08",event:"Invention of the first tea bag",question:"What was the first tea bag made of?",correctAnswer:"2",answers:"1 Paper. 2 Silk. 3 Cotton.",key:"b3",stringAnswer:"Silk"},b4:{year:1953,yearString:"19 53",event:"Discovery of the double helix structure of dna",question:"When was the sandwich invented?",correctAnswer:"3",answers:"1 in 12th century. 2 in 14th century. 3 in 17th century",key:"b19",stringAnswer:"in 17th century"},b5:{year:1913,yearString:"19 13",event:"Invention of crossword puzzle",question:"When?",correctAnswer:"3",answers:"1 New Yorker.  2 the New York Times.  3 the New York World.",key:"b5",stringAnswer:"the New York World"},b6:{year:1810,yearString:"18 10",event:"Invention of the first can",question:"Who is responsible for creating the tin canning process?",correctAnswer:"1",answers:"1 Peter Durand.  2 Thomas Edison.  3 the American Can Company.",key:"b6",stringAnswer:"Peter Durand"},b7:{year:1829,yearString:"18 29",event:"Creation of the Braille alphabet",question:"What nationality was Louis Braille?",correctAnswer:"2",answers:"1 British. 2 French. 3 Dutch.",key:"b7",stringAnswer:"French"},b8:{year:1834,yearString:"18 34",event:"Invention of the refrigerator",question:"Who is known as the father of the refrigerator?",correctAnswer:"2",answers:"1 Joseph Banks.  2 Jacob Perkins.  3 Charles Heath.",key:"b8",stringAnswer:"Jacob Perkins"},b9:{year:1836,yearString:"18 36",event:"The first practical revolver",question:"Who is responsible for the mass production of revolvers?",correctAnswer:"1",answers:"1 Samuel Colt.  2 Jacob Perkins.  3 Dudley Selden.",key:"b9",stringAnswer:"Samuel Colt"},b10:{year:1838,yearString:"18 38",event:"The invention of the Morse code",question:"Whom was Samuel Morse beside being an inventor?",correctAnswer:"1",answers:"1 a painter. 2 a scientist. 3 a politician.",key:"b10",stringAnswer:"a painter"},b11:{year:1839,yearString:"18 39",event:"The invention of the first mechanically-propelled two-wheeled bicycle",question:"Where did the word bicycle first appear?",correctAnswer:"1",answers:"1 The Daily News.  2 The Times.  3 New York Post.",key:"b11",stringAnswer:"The Daily News"},b12:{year:1861,yearString:"18 61",event:"The world's first demonstration of colour photography",question:"Who is known as the father of colour photography?",correctAnswer:"1",answers:"1 James Clerk Maxwell.  2  Arthur Maxwell.  3 Clerk John Maxwell.",key:"b12",stringAnswer:"James Clerk Maxwell "},b13:{year:1886,yearString:"18 86",event:"The invention of Coca-Cola",question:"Who did invent Coca-Cola?",correctAnswer:"3",answers:"1 Charles Heath.   2 Arthur Maxwell.  3 John Pemberton.",key:"b13",stringAnswer:"John Pemberton"},b14:{year:1891,yearString:"18 91",event:"The invention of the escalator",question:"Who did invent the escalator?",correctAnswer:"3",answers:"1 Luther Halsey.  2 Arthur Maxwell.  3 Jesse W. Reno.",key:"b14",stringAnswer:"Jesse W. Reno"},b15:{year:1893,yearString:" 18 93",event:"the invention of the common zipper",question:"Who is noted for the invention of the common zipper?",correctAnswer:"1",answers:"1 Whitcomb L. Judson. 2 Arthur Maxwell. 3 Joseph Banks.",key:"b15",stringAnswer:"Whitcomb L. Judson"},b16:{year:1849,yearString:"18 49",event:"the invention of the safety pin",question:" Walter Hunt is regarded as the inventor of the safety pin. Whom was he?",correctAnswer:"1",answers:"1 An American mechanic. 2 A British chemist.  3 An American physicist. ",key:"b16",stringAnswer:"An American mechanic"},b17:{year:1970,yearString:"19 70",event:"Invention of wheeled suitcase",question:"Under what name is wheeled suitcase patented?",correctAnswer:"3",answers:"1 Wheeled Luggage. 2 Rolling Suitcase. 3 Rolling Luggage.",key:"b17",stringAnswer:"Rolling Luggage"},b18:{year:1974,yearString:"19 74",event:"Invention of Rubik's cube",question:"Erno Rubik who invented the Rubiks cube was",correctAnswer:"1",answers:"1 a Hungarian. 2 a Slovak. 3 a Romanian.",key:"b18",stringAnswer:"a Hungarian"},b19:{year:1928,yearString:"19 28",event:"Invention of sliced bread",question:"When was the sandwich invented?",correctAnswer:"3",answers:"1 in 12th century. 2 in 14th century. 3 in 17th century",key:"b19",stringAnswer:"in 17th century"}},p={yes:!0,"of course":!0,yep:!0,sure:!0,"that's right":!0,nope:!1,no:!1,"no way":!1,never:!1},h={a1:"You are the best!",a2:"That's right!",a3:"Keep it up!",a4:"Good guess!",a5:"You're right!"};function y(e){return Object(c.q)((t=>({type:"SPEAK",value:e})))}function g(){const e=Object.keys(u).length;let t=Math.floor(Math.random()*e+0),n=u[Object.keys(u)[t]];const r=n;return delete u[n.key],r}function w(){const e=Object.keys(h).length;let t=Math.floor(Math.random()*e+0);return h[Object.keys(h)[t]]}const j=g();function m(e){return{initial:"prompt",states:{prompt:{entry:e,on:{ENDSPEECH:[{target:"ask",actions:[e=>console.log(u),Object(c.b)((e=>({count:e.count+1})))]}]}},ask:{entry:[Object(c.q)("LISTEN"),Object(c.q)("MAXSPEECH",{delay:5e3,id:"maxsp"})]}}}}const d={1:"1",2:"2",3:"3"},O={initial:"init",states:{init:{on:{CLICK:"ask"}},help:{entry:y("It seems that you need some help. Let's try again."),always:[{target:"ask.hist",actions:Object(c.b)((e=>({count:e.count-1})))}]},maxspeech1:{entry:y("Sorry, I can't hear you."),on:{ENDSPEECH:"ask.hist"}},stop:{entry:y("Ok"),always:"init"},query:{invoke:{id:"rasa",src:(e,t)=>{return n=e.query,fetch(new Request("https://cors-anywhere.herokuapp.com/https://time-line-game.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/react-xstate-colourchanger"},body:'{"text": "'.concat(n,'"}')})).then((e=>e.json()));var n},onDone:{target:"#compare",cond:e=>!("help"===e.recResult),actions:[Object(c.b)(((e,t)=>({intentbest:t.data.intent.name}))),(e,t)=>console.log(t.data),l("maxsp")]},onError:{target:"ask.hist",cond:e=>!("help"===e.recResult),actions:[l("maxsp"),(e,t)=>console.log(t.data)]}}},ask:{initial:"welcome",on:{RECOGNISED:[{target:"help",cond:e=>"help"===e.recResult},{target:"stop",actions:l("maxsp"),cond:e=>"stop"===e.recResult}]},states:{hist:{type:"history"},welcome:{entry:Object(c.b)((e=>({count:0}))),id:"wlcm",initial:"prompt",on:{RECOGNISED:[{cond:e=>!1===p[e.recResult],target:"#rules",actions:[l("maxsp"),Object(c.b)((e=>({object:g()}))),Object(c.b)((e=>({count:0}))),Object(c.b)((e=>({event:j.event}))),Object(c.b)((e=>({stringAns:j.stringAnswer}))),Object(c.b)((e=>({question:j.question}))),Object(c.b)((e=>({answers:j.answers}))),Object(c.b)((e=>({correctAnswer:j.correctAnswer}))),Object(c.b)((e=>({eventYear:j.year}))),Object(c.b)((e=>({pointsUser:0}))),Object(c.b)((e=>({year:e.object.year}))),Object(c.b)((e=>({eventCompare:e.object.event}))),Object(c.b)((e=>({yearString:e.object.yearString})))]},{cond:e=>!0===p[e.recResult],target:"#question",actions:[l("maxsp"),Object(c.b)((e=>({object:g()}))),Object(c.b)((e=>({count:0}))),Object(c.b)((e=>({event:j.event}))),Object(c.b)((e=>({stringAns:j.stringAnswer}))),Object(c.b)((e=>({question:j.question}))),Object(c.b)((e=>({answers:j.answers}))),Object(c.b)((e=>({correctAnswer:j.correctAnswer}))),Object(c.b)((e=>({eventYear:j.year}))),Object(c.b)((e=>({pointsUser:0}))),Object(c.b)((e=>({year:e.object.year}))),Object(c.b)((e=>({eventCompare:e.object.event}))),Object(c.b)((e=>({yearString:e.object.yearString})))]}],MAXSPEECH:"#root.dm.maxspeech1"},states:{prompt:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"Welcome to Timeline. Do you know how to play?"})))))}},rules:{id:"rules",initial:"prompt",on:{ENDSPEECH:{target:"#question"}},states:{prompt:{entry:y("You're going to hear a year of an event. You need to decide if one event happened before or after the second one.                     If you guess correctly, you get a point. If you do not manage to answer correctly, you will hear another question,                     where you need to decide, which answer is correct. You can do it by saying: 1, 2 or 3.  \n                    If you cannot answer the second question, you lose. If you want to stop the game, just say stop.                     If you need help, just say help.                    Good luck!")}}},question:{id:"question",initial:"prompt",entry:Object(c.b)((e=>({count:0}))),on:{RECOGNISED:[{target:"#root.dm.query",actions:[Object(c.b)((e=>({correctAns:"after"}))),Object(c.b)((e=>({wrongAnswer:"before"}))),Object(c.b)((e=>({query:e.recResult})))],cond:e=>e.year<e.eventYear&&!("help"===e.recResult)&&!("stop"===e.recResult)},{target:"#root.dm.query",actions:[Object(c.b)((e=>({correctAns:"before"}))),Object(c.b)((e=>({wrongAnswer:"after"}))),Object(c.b)((e=>({query:e.recResult})))],cond:e=>e.year>e.eventYear&&!("help"===e.recResult)&&!("stop"===e.recResult)},{target:".maxspeech",actions:l("maxsp"),cond:e=>!("help"===e.recResult)&&!("stop"===e.recResult)}],MAXSPEECH:".maxspeech"},states:{prompt:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"The year of ".concat(e.eventCompare," is ").concat(e.yearString,". Was ").concat(e.event," earlier or later? What do you think?")}))))),prompt1:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"Was ".concat(e.event," earlier or later? What do you think?")}))))),prompt2:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"What do you think?"}))))),maxspeech:{entry:y("Sorry, I can't hear you."),on:{ENDSPEECH:[{cond:e=>0===e.count,target:"prompt"},{cond:e=>1===e.count,target:"prompt1"},{target:"prompt2",cond:e=>2===e.count},{target:"#root.dm.init",cond:e=>3===e.count}]}}}},compare:{id:"compare",initial:"prompt",on:{ENDSPEECH:[{target:"correct",actions:[Object(c.b)((e=>({pointsUser:e.pointsUser+1}))),Object(c.b)((e=>({eventCompare:e.event}))),Object(c.b)((e=>({compliment:w()})))],cond:e=>e.correctAns===e.intentbest},{target:"wrong",cond:e=>e.wrongAnswer===e.intentbest,actions:[Object(c.b)((e=>({compliment:w()}))),Object(c.b)((e=>({eventCompare:e.event})))]},{target:".nomatch",cond:e=>!("help"===e.recResult)&&!("stop"===e.recResult)}]},states:{prompt:{entry:Object(c.q)((e=>({type:"SPEAK",value:"Ok. Let's check."})))},nomatch:{entry:y("Because the answer is not valid, you will hear the same question again."),on:{ENDSPEECH:"#question"}}}},correct:{initial:"prompt",on:{ENDSPEECH:[{target:"final",cond:e=>5===e.pointsUser},{target:"question",actions:[Object(c.b)((e=>({yearString:e.object.yearString}))),Object(c.b)((e=>({object:g()}))),Object(c.b)((e=>({year:e.eventYear}))),Object(c.b)((e=>({event:e.object.event}))),Object(c.b)((e=>({eventYear:e.object.year}))),Object(c.b)((e=>({stringAns:e.object.stringAnswer}))),Object(c.b)((e=>({question:e.object.question}))),Object(c.b)((e=>({answers:e.object.answers}))),Object(c.b)((e=>({correctAnswer:e.object.correctAnswer})))]}]},states:{prompt:{entry:Object(c.q)((e=>({type:"SPEAK",value:"Yes, correct. ".concat(e.compliment)})))}}},wrong:{entry:Object(c.b)((e=>({count:0}))),initial:"prompt",on:{RECOGNISED:[{target:"good",cond:e=>e.correctAnswer===e.recResult,actions:Object(c.b)((e=>({pointsUser:e.pointsUser+.5})))},{target:"bad",cond:e=>!(e.recResult===e.correctAnswer)&&e.recResult in d},{target:".maxspeech",actions:l("maxsp"),cond:e=>!("help"===e.recResult)&&!("stop"===e.recResult)}],MAXSPEECH:".maxspeech"},states:{prompt:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"No, sorry, you're wrong. Maybe you can answer this one.\n                        ".concat(e.question,". ").concat(e.answers,".")}))))),prompt1:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"Say 1, 2 or 3."}))))),prompt2:Object(o.a)({},m(Object(c.q)((e=>({type:"SPEAK",value:"Say 1, 2 or 3."}))))),maxspeech:{entry:y("Sorry"),on:{ENDSPEECH:[{cond:e=>0===e.count,target:"prompt"},{cond:e=>1===e.count,target:"prompt1"},{target:"prompt2",cond:e=>2===e.count},{target:"#root.dm.init",cond:e=>3===e.count}]}}}},good:{initial:"prompt",on:{ENDSPEECH:[{target:"question",actions:[Object(c.b)((e=>({object:g()}))),Object(c.b)((e=>({eventCompare:e.event}))),Object(c.b)((e=>({year:e.eventYear}))),Object(c.b)((e=>({event:e.object.event}))),Object(c.b)((e=>({eventYear:e.object.year}))),Object(c.b)((e=>({stringAns:e.object.stringAnswer}))),Object(c.b)((e=>({question:e.object.question}))),Object(c.b)((e=>({answers:e.object.answers}))),Object(c.b)((e=>({correctAnswer:e.object.correctAnswer})))]}]},states:{prompt:{entry:Object(c.q)((e=>({type:"SPEAK",value:"Yes, that's correct. It was ".concat(e.stringAns,". Your score is ").concat(e.pointsUser,". ").concat(e.compliment)})))}}},bad:{initial:"prompt",on:{ENDSPEECH:"#root.dm.init"},states:{prompt:{entry:Object(c.q)((e=>({type:"SPEAK",value:"Sorry, that's not the correct answer. It was ".concat(e.stringAns,". Your score is ").concat(e.pointsUser,". Try again.")})))}}},final:{initial:"prompt",on:{ENDSPEECH:"#root.dm.init"},states:{prompt:{entry:Object(c.q)((e=>({type:"SPEAK",value:"Congrats, you won!"})))}}}}}}};var v=n(22),A=n(13);Object(b.a)({url:"https://statecharts.io/inspect",iframe:!1});const S=Object(a.a)({id:"root",type:"parallel",states:{dm:Object(o.a)({},O),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(c.b)(((e,t)=>({ttsAgenda:t.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(c.b)(((e,t)=>({recResult:t.value})))],target:".match"},RECOGNISED:{target:"idle",actions:"cancel"},MAXSPEECH:"idle"},states:{progress:{},match:{entry:Object(c.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:e=>{console.log("<< ASR: "+e.recResult)},test:()=>{console.log("test")},logIntent:e=>{console.log("<< NLU intent: "+e.nluData.intent.name)}}}),E=e=>{switch(!0){case e.state.matches({asrtts:"recognising"}):return Object(A.jsx)("button",Object(o.a)(Object(o.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},e),{},{children:"Listening..."}));case e.state.matches({asrtts:"speaking"}):return Object(A.jsx)("button",Object(o.a)(Object(o.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},e),{},{children:"Speaking..."}));default:return Object(A.jsx)("button",Object(o.a)(Object(o.a)({type:"button",className:"glow-on-hover"},e),{},{children:"Click to start"}))}};function k(){const e=Object(v.useSpeechSynthesis)({onEnd:()=>{u("ENDSPEECH")}}),t=e.speak,n=e.cancel,o=(e.speaking,Object(v.useSpeechRecognition)({onResult:e=>{u({type:"ASRRESULT",value:e})}})),s=o.listen,a=(o.listening,o.stop),c=Object(i.b)(S,{devTools:!0,actions:{recStart:Object(i.a)((()=>{console.log("Ready to receive a color command."),s({interimResults:!1,continuous:!0})})),recStop:Object(i.a)((()=>{console.log("Recognition stopped."),a()})),changeColour:Object(i.a)((e=>{console.log("Repainting..."),document.body.style.background=e.recResult})),ttsStart:Object(i.a)(((e,n)=>{console.log("Speaking..."),t({text:e.ttsAgenda})})),ttsCancel:Object(i.a)(((e,t)=>{console.log("TTS STOP..."),n()}))}}),b=Object(r.a)(c,3),l=b[0],u=b[1];b[2];return Object(A.jsx)("div",{className:"App",children:Object(A.jsx)(E,{state:l,onClick:()=>u("CLICK")})})}const f=document.getElementById("root");s.render(Object(A.jsx)(k,{}),f)}},[[40,1,2]]]);
//# sourceMappingURL=main.1dc7614a.chunk.js.map